services:
  portfolio:
    build:
      context: .
      dockerfile: Dockerfile
    image: portfolio-isaac
    container_name: portfolio-isaac
    restart: unless-stopped
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
      # Grafana Faro - must target the faro-collector URL, not the otlp-gateway
      - NEXT_PUBLIC_FARO_URL=${NEXT_PUBLIC_FARO_URL}
      - NEXT_PUBLIC_FARO_APP_NAME=${NEXT_PUBLIC_FARO_APP_NAME:-mds-devops-portfolio}
      - NEXT_PUBLIC_FARO_ENV=${NEXT_PUBLIC_FARO_ENV:-production}
      # OpenTelemetry - Backend Traces
      - OTEL_SERVICE_NAME=${OTEL_SERVICE_NAME}
      - OTEL_EXPORTER_OTLP_ENDPOINT=${OTEL_EXPORTER_OTLP_ENDPOINT}
      - OTEL_EXPORTER_OTLP_HEADERS=${OTEL_EXPORTER_OTLP_HEADERS}
      - OTEL_EXPORTER_OTLP_PROTOCOL=http/protobuf
